<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/app.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Saira:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/assets/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/assets/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/assets/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="/assets/favicon/site.webmanifest" />
    <title>{{title}}</title>
  </head>

  <body>
    <section
      class="grid grid-cols-1 lg:grid-cols-3 xl:h-screen xl:min-w-screen bg-unidYellow bg-wave bg-cover"
    >
      <div
        class="lg:w-6/12 md:w-8/12 2xl:w-4/12 flex flex-col lg:col-span-2 space-y-10 lg:space-y-12 justify-center mx-auto w-10/12 py-20 lg:py-16"
      >
        <div class="space-y-3 lg:space-y-6">
          <h1>Log ind</h1>
          <p id="subheader">
            Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quae,
            voluptatum!
          </p>
        </div>
        <form class="space-y-6 lg:space-y-8">
          <div id="username">
            <!-- USERNAME -->
            <!-- prettier-ignore -->
            % include('utilities/input_field', label_for=form_inputs['username']['label_for'], form_label=form_inputs['username']['text'], form_svg=form_inputs['username']['icon'], type=form_inputs['username']['type'], name=form_inputs['username']['name'], inputmode=form_inputs['username']['inputmode'], placeholder=form_inputs['username']['placeholder'], form_info=form_inputs['username']['form_info'])
          </div>
          <div class="form_input_error_message">
            <!-- PASSWORD -->
            <!-- prettier-ignore -->
            % include('utilities/password_field')
          </div>
        </form>
        <div class="space-y-6">
          <!-- ERROR MESSAGE -->
          <div
            id="form_input_error_message"
            class="object_hidden items-center gap-3"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
            >
              <path
                fill="#ef4444"
                d="M12 17q.425 0 .713-.288T13 16t-.288-.712T12 15t-.712.288T11 16t.288.713T12 17m0-4q.425 0 .713-.288T13 12V8q0-.425-.288-.712T12 7t-.712.288T11 8v4q0 .425.288.713T12 13m0 9q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"
              />
            </svg>
            <div class="flex-col">
              <p class="font-bold">Hov!</p>
              <p id="error_message"></p>
            </div>
          </div>
          <div class="w-full pt-4 items-center mx-auto flex justify-center">
            <!-- prettier-ignore -->
            % include('utilities/buttons/primary_button', link='login(event)', type='submit', button_text='Log ind')
          </div>
          <div
            class="flex pt-2 text-sm gap-2 text-unidLightBlue border-t border-unidLightBlue"
          >
            <p>Har du ikke en bruger?</p>
            <a
              href="#"
              class="group transition duration-300 cursor-pointer text-sm hover:scale-105 font-bold ease-in-out"
            >
              Opret bruger
              <span
                class="block max-w-0 group-hover:max-w-full transition-all duration-500 h-0.5 bg-unidPurple"
              ></span>
            </a>
          </div>
        </div>
      </div>
      <div
        class="bg-unidLightBlue relative flex py-14 lg:py-0 justify-center mx-auto"
      >
        <img
          class="absolute top-10 right-10 hidden lg:block w-40"
          src="/assets/logos/primary_logo.svg"
          alt=""
        />
        <img
          class="w-8/12 lg:w-10/12 mx-auto -mt-20 lg:-mt-0 lg:-ml-20"
          src="/assets/illustrations/unid_universe.svg"
          alt=""
        />
      </div>
    </section>

    <script>
      async function login(event) {
        event.preventDefault();
        const username = document.querySelector("input[name='username']").value;
        const password = document.querySelector("input[name='password']").value;

        const formData = new FormData();
        formData.append("username", username);
        formData.append("password", password);

        const response = await fetch("/login", {
          method: "POST",
          body: formData,
        });
        const data = await response.json();

        if (data.error) {
          document.getElementById("error_message").innerText = data.error;
          document.getElementById("form_input_error_message").style.display =
            "flex";
        } else {
          console.log("Login successful");
          window.location.href = "/";
        }
      }
    </script>
  </body>
</html>
